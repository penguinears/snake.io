<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nokia Snake Multiplayer (Bots)</title>
<style>
  body {
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  canvas {
    background: #e5e5e5; /* Nokia-like background */
    image-rendering: pixelated;
    border: 4px solid #333;
  }
</style>
</head>
<body>
<canvas id="game" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const tileSize = 30; // bigger tiles for classic look
const cols = canvas.width / tileSize;
const rows = canvas.height / tileSize;

// Player snake
let snakes = [
  { x: 5, y: 5, dx: 1, dy: 0, color: "#008000", body: [{x:5,y:5}], isBot:false },
  { x: 15, y: 15, dx: 0, dy: 1, color: "#000080", body: [{x:15,y:15}], isBot:true },
  { x: 20, y: 10, dx: 0, dy: -1, color: "#800080", body: [{x:20,y:10}], isBot:true }
];

let foods = [
  { x: 10, y: 10 },
  { x: 18, y: 12 }
];

const maxLength = 12; // snake max length

// Draw function
function draw() {
  ctx.fillStyle = "#e5e5e5";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Draw foods
  ctx.fillStyle = "red";
  for (let f of foods) {
    ctx.fillRect(f.x*tileSize, f.y*tileSize, tileSize, tileSize);
  }

  // Draw snakes
  for (let s of snakes) {
    ctx.fillStyle = s.color;
    for (let b of s.body) {
      ctx.fillRect(b.x*tileSize, b.y*tileSize, tileSize, tileSize);
      ctx.strokeStyle = "#333"; // classic grid outline
      ctx.strokeRect(b.x*tileSize, b.y*tileSize, tileSize, tileSize);
    }
  }
}

// Update function (slower, controlled speed)
function update() {
  for (let s of snakes) {
    // AI movement
    if (s.isBot) {
      let target = foods.reduce((a,b) => 
        Math.abs(b.x-s.x)+Math.abs(b.y-s.y) < Math.abs(a.x-s.x)+Math.abs(a.y-s.y)?b:a
      );
      s.dx = target.x > s.x ? 1 : target.x < s.x ? -1 : 0;
      s.dy = target.y > s.y ? 1 : target.y < s.y ? -1 : 0;
    }

    s.x += s.dx;
    s.y += s.dy;

    // Map wrapping
    if (s.x < 0) s.x = cols-1;
    if (s.x >= cols) s.x = 0;
    if (s.y < 0) s.y = rows-1;
    if (s.y >= rows) s.y = 0;

    s.body.push({x:s.x, y:s.y});
    if (s.body.length > maxLength) s.body.shift();

    // Eat food
    for (let i=0;i<foods.length;i++){
      if(s.x===foods[i].x && s.y===foods[i].y){
        foods.splice(i,1);
        foods.push({x:Math.floor(Math.random()*cols), y:Math.floor(Math.random()*rows)});
        if(s.body.length < 30) s.body.push({x:s.x, y:s.y}); // grow
      }
    }
  }

  // Collision: push out other snakes
  for (let i=0;i<snakes.length;i++){
    for (let j=0;j<snakes.length;j++){
      if(i===j) continue;
      let head = snakes[i].body[snakes[i].body.length-1];
      let body = snakes[j].body;
      for(let k=0;k<body.length;k++){
        if(head.x===body[k].x && head.y===body[k].y){
          snakes[i].body = [{x:Math.floor(Math.random()*cols),y:Math.floor(Math.random()*rows)}];
          snakes[i].x = snakes[i].body[0].x;
          snakes[i].y = snakes[i].body[0].y;
        }
      }
    }
  }
}

// Controls
document.addEventListener("keydown", e=>{
  let p = snakes[0];
  if(e.key==="ArrowUp" && p.dy===0){p.dx=0; p.dy=-1;}
  if(e.key==="ArrowDown" && p.dy===0){p.dx=0; p.dy=1;}
  if(e.key==="ArrowLeft" && p.dx===0){p.dx=-1; p.dy=0;}
  if(e.key==="ArrowRight" && p.dx===0){p.dx=1; p.dy=0;}
});

// Game loop with fixed speed
setInterval(()=>{
  update();
  draw();
}, 200); // 200ms per step â†’ slower, classic feel

</script>
</body>
</html>

